OpenResty 最佳实践=======在 2012 年的时候，加入到奇虎 360 公司，为新的产品做技术选型。由于之前一直混迹在 Python 圈子里面，也接触过 Nginx C 模块的高性能开发，一直想找到一个兼备 Python 快速开发和 Nginx C 模块高性能的产品。看到 OpenResty 后，有发现新大陆的感觉。于是在新产品里面力推 OpenResty，团队里面几乎没人支持，经过几轮性能测试，虽然轻松击败所有的其他方案，但是其他开发人员并不愿意参与到基于 OpenResty 这个“陌生”框架的开发中来。于是我开始了一个人的 OpenResty 之旅，刚开始经历了各种技术挑战，庆幸有详细的文档，以及春哥和邮件列表里面热情的帮助，成了团队里面 bug 最少和几乎不用加班的同学。2014 年，团队进来了一批新鲜血液，很有技术品味，先后选择 OpenResty 来作为技术方向。不再是一个人在战斗，而另外一个新问题摆在团队面前，如何保证大家都能写出高质量的代码，都能对 OpenResty 有深入的了解？知识的沉淀和升华，成为一个迫在眉睫的问题。我们选择把这几年的一些浅薄甚至可能是错误的实践，通过 gitbook 的方式公开出来，一方面有利于团队自身的技术积累，另一方面，也能让更多的高手一起加入，让 OpenResty 的使用变得更加简单，更多的应用到服务端开发中，毕竟人生苦短，少一些加班，多一些陪家人。这本书的定位是最佳实践，同时会对 OpenResty 做简单的基础介绍。但是我们对初学者的建议是，在看书的同时下载并安装 OpenResty，把[官方网站](http://openresty.org/)的 Presentations 浏览和实践几遍。请 **一直** 使用最新的 OpenResty 版本来运行本书的代码。希望你能 enjoy OpenResty 之旅！- - -* [Socket 编程发展](base/web_evolution.md)* [简介](base/intro.md)* [使用动态 DNS 来完成 HTTP 请求](dns/use_dynamic_dns.md)* [LuaRestyDNSLibrary 简介](dns/main.md)* [什么时候使用](flame_graph/when.md)* [什么是火焰图](flame_graph/what.md)* [如何安装火焰图生成工具](flame_graph/install.md)* [如何定位问题](flame_graph/how.md)* [稀疏数组](json/sparse_array.md)* [json 解析的异常捕获](json/parse_exception.md)* [编码为 array 还是 object](json/array_or_object.md)* [缓存失效风暴](lock/cache-miss-storm.md)* [while 型控制结构](lua/while.md)* [什么是 JIT？](lua/what_jit.md)* [日期时间函数](lua/time_date_function.md)* [table 库](lua/table_library.md)* [String 库](lua/string_library.md)* [repeat 控制结构](lua/repeat.md)* [正则表达式](lua/re.md)* [表达式](lua/operator.md)* [Lua 面向对象编程](lua/object_oriented.md)* [抵制使用 module() 定义模块](lua/not_use_module.md)* [非空判断](lua/not_nil.md)* [module 是邪恶的](lua/module_is_evil.md)* [模块](lua/module.md)* [元表](lua/metatable.md)* [数学库](lua/math_library.md)* [Lua 入门](lua/main.md)* [局部变量](lua/local.md)* [控制结构 if-else](lua/if_else.md)* [函数返回值](lua/function_result.md)* [函数的参数](lua/function_parameter.md)* [Lua 函数](lua/function_descrip.md)* [函数定义](lua/function_define.md)* [调用代码前先定义函数](lua/function_before_use.md)* [for 控制结构](lua/for.md)* [文件操作](lua/file.md)* [FFI](lua/FFI.md)* [虚变量](lua/dummy_var.md)* [点号与冒号操作符的区别](lua/dot_diff.md)* [控制结构](lua/control_structrues.md)* [Lua 基础数据类型](lua/class.md)* [全动态函数调用](lua/call_user_func_array.md)* [Lua 环境搭建](lua/build_env.md)* [Lua 简介](lua/brief.md)* [break，return 和 goto](lua/break.md)* [判断数组大小](lua/array_size.md)* [Nginx 静态文件服务](ngx/static_file.md)* [反向代理](ngx/reverse_proxy.md)* [Nginx 陷阱和常见错误](ngx/pitfalls_and_common_mistakes.md)* [日志](ngx/nginx_log.md)* [location 匹配规则](ngx/nginx_local_pcre.md)* [Nginx 新手起步](ngx/nginx_brief.md)* [Nginx](ngx/nginx.md)* [负载均衡](ngx/balancer.md)* [怎样理解 cosocket](ngx_lua/whats_cosocket.md)* [典型应用场景](ngx_lua/use_case.md)* [定时任务](ngx_lua/timer.md)* [sleep](ngx_lua/sleep.md)* [`ngx.shared.DICT` 非队列性质](ngx_lua/shared_get_keys.md)* [# 为什么我们的域名不能被解析](ngx_lua/resolve_the_domain_name.md)* [执行阶段概念](ngx_lua/phase.md)* [请求中断后的处理](ngx_lua/on_abort.md)* [网上有大量对 Lua 调优的推荐，我们应该如何看待？](ngx_lua/lua_opt.md)* [变量的共享范围](ngx_lua/lua-variable-scope.md)* [动态限速](ngx_lua/lua-limit.md)* [正确的记录日志](ngx_lua/log.md)* [KeepAlive](ngx_lua/keepalive.md)* [如何引用第三方 resty 库](ngx_lua/how_use_third_lib.md)* [如何只启动一个 timer 工作？](ngx_lua/how_one_instance_time.md)* [热装载代码](ngx_lua/hot_load.md)* [调试](ngx_lua/debug.md)* [请求返回后继续执行](ngx_lua/continue_after_eof.md)* [缓存](ngx_lua/cache.md)* [阻塞操作](ngx_lua/block_io.md)* [禁止某些终端访问](ngx_lua/allow_deny.md)* [与其他 location 配合](openresty/work_with_location.md)* [子查询](openresty/sub_request.md)* [简单API Server框架](openresty/simple_api.md)* [不同阶段共享变量](openresty/share_var.md)* [防止 SQL 注入](openresty/safe_sql.md)* [输出响应体](openresty/response.md)* [日志输出](openresty/log_response.md)* [Mac OS X 平台安装](openresty/install_osx.md)* [Windows 平台安装](openresty/install_on_windows.md)* [Ubuntu 平台安装](openresty/install_on_ubuntu.md)* [CentOS 平台安装](openresty/install_on_centos.md)* [环境搭建](openresty/install.md)* [使用 Nginx 内置绑定变量](openresty/inline_var.md)* [如何发起新 HTTP 请求](openresty/how_request_http.md)* [HelloWorld](openresty/helloworld.md)* [获取 uri 参数](openresty/get_url_param.md)* [获取请求 body](openresty/get_req_body.md)* [超时](postgres/timeout.md)* [SQL 注入](postgres/sql_inject.md)* [不支持事务](postgres/not_support_transaction.md)* [PostgresNginxModule 模块的调用方式](postgres/how_to_use.md)* [健康监测](postgres/health_check.md)* [select + set_keepalive 组合操作引起的数据读写错误](redis/select-keeplive.md)* [script 压缩复杂请求](redis/script.md)* [Redis 接口的二次封装（发布订阅）](redis/pub_sub_package.md)* [pipeline 压缩请求数量](redis/pipeline.md)* [Redis 接口的二次封装](redis/out_package.md)* [动态生成的 lua-resty-redis 模块方法](redis/dynamic_redis_module_method.md)* [访问有授权验证的 Redis](redis/auth_connect.md)* [TLS session resumption](ssl/session_resumption.md)* [HTTPS 时代](ssl/introduction.md)* [动态加载证书和 OCSP stapling](ssl/certificate.md)* [单元测试](test/unittest.md)* [代码静态分析](test/static_analysis.md)* [性能测试](test/performance_test.md)* [代码覆盖率](test/coverage.md)* [持续集成](test/ci.md)* [API 测试](test/apitest.md)* [灰度发布](test/abtest.md)* [TIME_WAIT](web/time_wait.md)* [协议无痛升级](web/switch_protocol.md)* [与 Docker 使用的网络瓶颈](web/docker.md)* [连接池](web/conn_pool.md)* [代码规范](web/code_style.md)* [数据合法性检测](web/check_data_valid.md)* [C10K 编程](web/c10k.md)* [API 的设计](web/api.md)* [Web 服务](web.md)* [测试](test.md)* [目录](SUMMARY.md)* [PostgresNginxModule](postgres.md)* [LuaNginxModule](ngx_lua.md)* [lock](lock.md)* [LuaCjsonLibrary](json.md)* [火焰图](flame_graph.md)----本书源码在 GitHub 上维护，欢迎参与：[我要写书](https://github.com/moonbingbing/openresty-best-practices)。也可以加入 QQ 群来和我们交流：- 34782325（技术交流 ①群 已满）- 481213820（技术交流 ②群 已满）- 124613000（技术交流 ③群）- 679145170（技术交流 ④群）